package wormhole

import (
	"app/utils"
	"fmt"
	"testing"

	"github.com/ethereum/go-ethereum/common"
)

func TestParseVAA(t *testing.T) {
	input := common.FromHex("0x01000000020d004153e0f25d5846d12245b7409b85f9fde60f20d5df62b8ca3cdc639bb28e8cc012923e4ed6bcefb7c4f75b62c46cd13c814f3e5377226272769bdec73094bebd0102be2f99be41fb4f0f06e2942e4287c23d8a66170cb86b1067cec8528a147b716d132159710bb1e5489829ea1e3ddad117ebf12cd404586a2665b25db6492a47ff0003ef58af6ca6ba0307fbd8441de7f525ee9e973ea5fee24d50def9a4d19c6ffbc05bb4c6ad9363fda3ffd549f3b424f34ac38fc737919ca26535495c1860cc535600048237d12de234a59a2c67433cc28bba3e7606e23ee9f0d05f77646b6e2c96a583063f5c0bee1c1d68697bdbbf361e4bef9d8f469a0828ac525cefbbe7865dddc0000519e210039a49a8e65c07963bd86391c963f9c2e861d347d7dc30b0e0b8443b750b13a0b8ba0388f1bf5933e19989de01238ead6eb9a4da6f92596d94fd0243a400063345b30df7157840a20259b8e97d9b9ff37ec2d3bf91386fb6c8a771f238f7962e53f76ed3b659989a487dc14e72da1dd4d096d2dd18bf6a4cc15c2ad20841960108ef469b880f5b9b2bc0926a8d1ca0c36c0afe34b04ea565d680a0f483b3e43c262c805ddb5e9f06dcd78ed1c3509687a5ee1cea2a6e02adb62033f27784b03a16000a057d68b5dbc1f053187ef9abdcffb593d16697a2fa4aa0c807f4dedfbc84f8b812e0b3d3725a815f3a901a3215b97baa4cfec49fbe83427a3ea52dbd6980c30f010bc24396118ad7622dc9bac437e80ba86c2ecb06915b72cc24d7a0f61d89366b4d6f9ca3b2f88f64ece1bf760bdf7925477481e88cc21260afbf0f66cf31983ff6000dd85537a318fc5f945c82482b3876740533f908f6d3f5522eb4acf8aed8447bc34df051a4190eba5107b9a0609d5a8576d485c4e1ae9c2dbb13136a69cac6c0d0010e6705ca95929bd287598dcc05477542f63b6685360c51ab23ec655dbc1794f0315a8dc447e308113f52529f392938e1a3be25d5547fff4a54f76b7c4e6762a8dd01105a2d1aa4b2a9481010da5042daf9f1726414188f4f4aaa549690a758d62b30bf1b87a7b83838d3856d214b6ccc06ec4a6f4fe5225d8fd81dd61f4d3ba31017e9011283c1613b413321a5aa446373c96612d1bed352742a36e07ff51aa55f84054f3308342e4becd6d9003abc2c9b0ac62a91404a3bf29335955deaf78ac145b50e4a006390775a306b010000050000000000000000000000005a58505a96d1dbf8df91cb21b54419fc36e93fde0000000000014e650f010000000000000000000000000000000000000000000000000000000000457c780000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619000500000000000000000000000055edeac15d434f60209dfb6c7dfaabeffde5b6de00020000000000000000000000000000000000000000000000000000000000000000")

	vaa := ParseVAA(input)
	utils.PrintPretty(vaa)
	tran := ParseTokenTransferPayload(common.FromHex(vaa.Payload))
	utils.PrintPretty(tran)

	fmt.Println(deNormalizeAmount(tran.Amount, 18))

}

func TestSli(t *testing.T) {
	a := []byte{1, 2, 3}
	fmt.Println(a)
	fmt.Println(a[3:])
}
